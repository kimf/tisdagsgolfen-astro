---
import Loader from 'src/assets/images/grid.svg';

import AppScreen from 'src/layouts/AppScreen.astro';
import Button from 'src/components/ui/button.astro';
import Hole from 'src/pages/partials/scoring/[id]/holes/[number].astro';

const { id } = Astro.params;
const userId = await Astro.session?.get('userId');

if (!userId) throw new Error('Logga in för att föra score');
if (!id) throw new Error('Id saknas för runda');
---

<AppScreen title="För score">
  <footer
    class="absolute z-5 max-w-screen-lg p-1 mx-auto bottom-1 left-1 bg-background/75 backdrop-blur-xs"
  >
    <div class="flex gap-2">
      <Button intent="link" size="sm">
        <a href={`/`}>START</a>
      </Button>
      <Button intent="link" size="sm">
        <a href={`/scoring/${id}/menu`}>MENY</a>
      </Button>
      <Button intent="link" size="sm">
        <a href={`/scoring/${id}/leaderboard`}>LEDARTAVLA</a>
      </Button>
      <Loader class="htmx-indicator" width="20" height="20" />
    </div>
  </footer>

  <Hole />
</AppScreen>

<script src="src/assets/alpine/ScoringController.ts"></script>

<style is:inline>
  .slide-it.htmx-added {
    opacity: 0;
  }
  .slide-it {
    opacity: 1;
    transition: opacity 1s ease-out;
  }
</style>
