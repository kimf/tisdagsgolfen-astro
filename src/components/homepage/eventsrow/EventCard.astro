---
import { cx, cva } from 'src/components/cva.config';
import { type VariantProps } from 'cva';
import type { HTMLAttributes } from 'astro/types';
import EventPillRow from 'src/components/shared/EventPillRow.astro';

const eventCardVariants = cva({
  base: 'text-muted-foreground h-26 overflow-hidden rounded-md shadow-md bg-card-foreground/25 p-3 flex flex-col bg-gradient-to-l from-slate-300 to-slate-100 border border-slate-300 rounded shadow-md',
  variants: {
    intent: {
      default: 'w-70'
    }
  },
  defaultVariants: {
    intent: 'default'
  }
});

interface Props extends HTMLAttributes<'div'>, VariantProps<typeof eventCardVariants> {
  date: string;
  special: boolean;
  strokes: boolean;
  teamEvent: boolean;
}

const { class: className, intent, ...props } = Astro.props;
---

<div class={cx(eventCardVariants({ intent }), className)} {...props}>
  <div class="flex justify-between">
    <h4>
      {
        new Date(props.date).toLocaleDateString('sv-SE', {
          day: 'numeric',
          month: 'short'
        })
      }
    </h4>

    <EventPillRow
      special={props.special}
      strokes={props.strokes}
      teamEvent={props.teamEvent}
      live
    />
  </div>

  <div class="mt-auto">
    <slot />
  </div>
</div>
